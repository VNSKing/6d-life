require=function t(e,n,i){function o(s,c){if(!n[s]){if(!e[s]){var r="function"==typeof require&&require;if(!c&&r)return r(s,!0);if(a)return a(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({"btn-control":[function(t,e,n){"use strict";cc._RFpush(e,"a1aa7qC7ihGNIzQI+k7Hako","btn-control"),cc.Class({"extends":cc.Component,properties:{btnArray:[cc.Node],_initActive:[],_touchNum:0},onLoad:function(){var t=cc.director.getCollisionManager();t.enabled=!0,this.node.name="btn#"+Date.now()},start:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=this.btnArray[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this._initActive[a.name]=a.active}}catch(s){e=!0,n=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw n}}},onCollisionEnter:function(t,e){if("shadow-player"==t.node.group||"player"==t.node.group){this._touchNum++;var n=!0,i=!1,o=void 0;try{for(var a,s=this.btnArray[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;c.active=!this._initActive[c.name]}}catch(r){i=!0,o=r}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}}console.log(this._touchNum)},onCollisionExit:function(t,e){if(("shadow-player"==t.node.group||"player"==t.node.group)&&(this._touchNum--,!this._touchNum)){var n=!0,i=!1,o=void 0;try{for(var a,s=this.btnArray[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;c.active=this._initActive[c.name]}}catch(r){i=!0,o=r}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}}console.log(this._touchNum)}}),cc._RFpop()},{}],"danger-control":[function(t,e,n){"use strict";cc._RFpush(e,"9ef7dCXvaNNLoToAevF7GQ8","danger-control"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){var t=cc.director.getCollisionManager();t.enabled=!0,this.node.name="danger#"+Date.now()},onCollisionEnter:function(t,e){"shadow-player"==t.node.group?t.node.removeFromParent():"player"==t.node.group&&cc.find("Canvas").emit("player-touch-danger")}}),cc._RFpop()},{}],"easing-helper":[function(t,e,n){"use strict";cc._RFpush(e,"4ca871EKElJm7q8fcHRSQ0R","easing-helper");var i=cc.Enum({easeIn:0,easeOut:1,easeInOut:2,easeExponentialIn:3,easeExponentialOut:4,easeExponentialInOut:5,easeSineIn:6,easeSineOut:7,easeSineInOut:8,easeElasticIn:9,easeElasticOut:10,easeElasticInOut:11,easeBounceIn:12,easeBounceOut:13,easeBounceInOut:14,easeBackIn:15,easeBackOut:16,easeBackInOut:17,easeQuadraticActionIn:18,easeQuadraticActionOut:19,easeQuadraticActionInOut:20,easeQuarticActionIn:21,easeQuarticActionOut:22,easeQuarticActionInOut:23,easeQuinticActionIn:24,easeQuinticActionOut:25,easeQuinticActionInOut:26,easeCircleActionIn:27,easeCircleActionOut:28,easeCircleActionInOut:29,easeCubicActionIn:30,easeCubicActionInOut:31,nope:32});e.exports=i,cc._RFpop()},{}],"gate-control":[function(t,e,n){"use strict";cc._RFpush(e,"c7449HMFxdOW7DFCSE1Zceo","gate-control"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){var t=cc.director.getCollisionManager();t.enabled=!0,this.node.name="gate#"+Date.now()},onCollisionEnter:function(t,e){"shadow-player"!=t.node.group&&"player"!=t.node.group||cc.find("Canvas").emit("touch-gate")}}),cc._RFpop()},{}],"girl-final-tips-script":[function(t,e,n){"use strict";cc._RFpush(e,"d3303+et3dDp7BjkbaD/mZs","girl-final-tips-script"),cc.Class({"extends":cc.Component,editor:{requireComponent:cc.Label},properties:{fadeDuration:1,delay:4,onActionEnd:cc.Component.EventHandler,tips:[cc.String],_times:0},onLoad:function(){this.nextTips()},preAction:function(){this.node.opacity=0,this.node.runAction(cc.sequence(cc.fadeIn(this.fadeDuration),cc.delayTime(this.delay),cc.fadeOut(this.fadeDuration),cc.callFunc(this.actionEnd.bind(this))))},actionEnd:function(){this.onActionEnd.emit()},nextTips:function(){if(this._times!=this.tips.length){var t=this.tips[this._times];this._times++,this.getComponent(cc.Label).string=t,this.preAction()}}}),cc._RFpop()},{}],"girl-tips-script":[function(t,e,n){"use strict";cc._RFpush(e,"668bcRFs3NNKabLa06J29oO","girl-tips-script"),cc.Class({"extends":cc.Component,properties:{fadeDuration:1,delay:4,onActionEnd:cc.Component.EventHandler},onLoad:function(){this.node.opacity=0,this.node.runAction(cc.sequence(cc.fadeIn(this.fadeDuration),cc.delayTime(this.delay),cc.fadeOut(this.fadeDuration),cc.callFunc(this.actionEnd.bind(this))))},actionEnd:function(){this.onActionEnd.emit()}}),cc._RFpop()},{}],"level-mgr":[function(t,e,n){"use strict";cc._RFpush(e,"eecafPdTDVAHZzRvB4ouHuu","level-mgr"),cc.Class({"extends":cc.Component,properties:{level:0,_sceneLoading:!1},onLoad:function(){this.node.on("touch-gate",this.nextLevel,this),this.node.on("player-touch-danger",this.restart,this),this.node.on("restart",this.restart,this)},restart:function(){if(!this._sceneLoading){this._sceneLoading=!0;var t="level-"+this.level+"-scene";cc.director.loadScene(t)}},nextLevel:function(){if(!this._sceneLoading){this._sceneLoading=!0;var t="level-"+(this.level+1)+"-scene";cc.director.loadScene(t)}}}),cc._RFpop()},{}],"move-control":[function(t,e,n){"use strict";cc._RFpush(e,"d63c0BfnYVDeJC9FQDTfVdR","move-control"),cc.Class({"extends":cc.Component,properties:{_left:!1,_right:!1,_up:!1,_down:!1,_jumping:!1,jumpY:40,speedX:5,_speedY:0,g:-10,_leftBlock:0,_rightBlock:0,_upBlock:0,_downBlock:0,_anim:null,_animState:null},onLoad:function(){this._anim=this.getComponent(cc.Animation),cc.systemEvent.on("keydown",this.onKeyDown,this),cc.systemEvent.on("keyup",this.onKeyUp,this);var t=cc.director.getCollisionManager();t.enabled=!0},onCollisionEnter:function(t,e){if("btn"!=t.node.group&&"toggle"!=t.node.group&&"gate"!=t.node.group&&"danger"!=t.node.group){var n=[],i=e.world.aabb,o=t.world.aabb,a=e.world.preAabb;t.world.preAabb;if(a.xMax<=o.xMin&&i.xMax>=o.xMin){var s=i.center.x-Math.abs(o.xMin-i.xMax);this.node.x=this.node.parent.convertToNodeSpaceAR(cc.v2(s,0)).x,n.push("_rightBlock"),this._rightBlock++}if(a.xMin>=o.xMax&&i.xMin<=o.xMax){var c=i.center.x+Math.abs(o.xMax-i.xMin);this.node.x=this.node.parent.convertToNodeSpaceAR(cc.v2(c,0)).x,n.push("_leftBlock"),this._leftBlock++}if(a.yMax<=o.yMin&&i.yMax>=o.yMin){var r=i.center.y-Math.abs(o.yMin-i.yMax);this.node.y=this.node.parent.convertToNodeSpaceAR(cc.v2(0,r)).y,n.push("_upBlock"),this._upBlock++}if(a.yMin>=o.yMax&&i.yMin<=o.yMax){var h=i.center.y+Math.abs(o.yMax-i.yMin);this.node.y=this.node.parent.convertToNodeSpaceAR(cc.v2(0,h)).y,n.push("_downBlock"),this._jumping=!1,this._downBlock++}void 0==t.blockArrays&&(t.blockArrays=[]),t.blockArrays[this.node.name]=n}},onCollisionExit:function(t,e){if("btn"!=t.node.group&&"toggle"!=t.node.group&&"gate"!=t.node.group&&"danger"!=t.node.group&&t.blockArrays&&void 0!=t.blockArrays[this.node.name]){var n=t.blockArrays[this.node.name],i=!0,o=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value;this[r]--}}catch(h){o=!0,a=h}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw a}}}},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.left:this._left=!0,this.node.scaleX=-1;break;case cc.KEY.right:this._right=!0,this.node.scaleX=1;break;case cc.KEY.up:this._jumping||(this._up=!0,this._jumping=!0);break;case cc.KEY.down:this._down=!0}this.changeAnim()},onKeyUp:function(t){switch(t.keyCode){case cc.KEY.left:this._left=!1;break;case cc.KEY.right:this._right=!1;break;case cc.KEY.down:this._down=!1}this.changeAnim()},changeAnim:function(){this._down?this._animState&&"squat"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("squat")):this._jumping?this._animState&&"jump"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("jump")):0==this._left&&1==this._right||1==this._left&&0==this._right?this._animState&&"move"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("move")):(0==this._left&&0==this._right||1==this._left&&1==this._right)&&(this._animState&&"idle"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("idle")))},update:function(t){this._left&&!this._leftBlock&&(this.node.x-=this.speedX),this._right&&!this._rightBlock&&(this.node.x+=this.speedX),this._downBlock?(this._speedY=0,this._jumping=!1,this.changeAnim()):this._speedY+=this.g*t,this._up&&(this._speedY=this.jumpY,this._up=!1,this._jumping=!0);var e=this._speedY;this._upBlock&&(e=Math.min(this._speedY,0)),this.node.y+=e*t}}),cc._RFpop()},{}],"restart-script":[function(t,e,n){"use strict";cc._RFpush(e,"4b3cfnTP5VBFY2hfE2b5SvU","restart-script"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this)},onTouchStart:function(){cc.find("Canvas").emit("restart")}}),cc._RFpop()},{}],"shadow-player-control":[function(t,e,n){"use strict";cc._RFpush(e,"9f257cibONPLZdkHuCvIP/2","shadow-player-control"),cc.Class({"extends":cc.Component,properties:{_fsm:null,_firstTimeFromPlayer:!0,_left:!1,_right:!1,_up:!1,_down:!1,_jumping:!1,jumpY:40,speedX:5,_speedY:0,g:-10,_leftBlock:0,_rightBlock:0,_upBlock:0,_downBlock:0,_anim:null,_animState:null},init:function(e,n,i){this._anim=this.getComponent(cc.Animation),this.node.scaleX=n.scaleX,this.node.name="shadow-player#"+Date.now();var o=cc.director.getCollisionManager();o.enabled=!0,this.node.on("touch-static",this.onTouchStatic,this),this.node.on("touch-squat",this.onTouchSquat,this),this._fsm=t("shadow-player-fsm").create(),this._fsm.onmoving=this.onMoving.bind(this),this._fsm.onsquating=this.onSquating.bind(this),this._fsm.onidling=this.onIdling.bind(this),this._fsm.onjumping=this.onJumping.bind(this),this._fsm.startup(),this._fsm[e](),void 0!=i&&i&&this._fsm.jump()},onTouchStatic:function(t){"leftBlock"==t.detail?this.node.scaleX=1:"rightBlock"==t.detail&&(this.node.scaleX=-1),this.onMoving()},onTouchSquat:function(){"moving"==this._fsm.current&&this._fsm.jump()},onJumping:function(){this.changeAnim(),this._up=!0,this._jumping=!0},onIdling:function(){this.changeAnim()},onSquating:function(){this.changeAnim()},onMoving:function(){this.changeAnim(),this.node.scaleX>0?(this._right=!0,this._left=!1):(this._left=!0,this._right=!1)},onCollisionEnter:function(t,e){var n=e.node.getComponent("shadow-player-control")._fsm.current;if("shadow-player"==t.node.group){var i=t.node.getComponent("shadow-player-control")._fsm.current;"moving"==n&&"idling"==i?this.blockCheck(t,e,!0):"moving"==n&&"squating"==i&&this.node.emit("touch-squat")}else"wall"==t.node.group&&("moving"==n||"jumping"==n?this.blockCheck(t,e,!0):this.blockCheck(t,e))},blockCheck:function(t,e,n){if("btn"!=t.node.group&&"toggle"!=t.node.group&&"gate"!=t.node.group&&"danger"!=t.node.group){var i=[],o=e.world.aabb,a=t.world.aabb,s=e.world.preAabb;t.world.preAabb;if(s.xMax<=a.xMin&&o.xMax>=a.xMin){var c=o.center.x-Math.abs(a.xMin-o.xMax);this.node.x=this.node.parent.convertToNodeSpaceAR(cc.v2(c,0)).x;var r=Math.abs(a.xMin-o.xMax);i.rightBlock=r,void 0!=n&&n&&this.node.emit("touch-static","rightBlock")}if(s.xMin>=a.xMax&&o.xMin<=a.xMax){var h=o.center.x+Math.abs(a.xMax-o.xMin);this.node.x=this.node.parent.convertToNodeSpaceAR(cc.v2(h,0)).x;var l=Math.abs(a.xMax-o.xMin);i.leftBlock=l,void 0!=n&&n&&this.node.emit("touch-static","leftBlock")}if(s.yMax<=a.yMin&&o.yMax>=a.yMin){var u=o.center.y-Math.abs(a.yMin-o.yMax);this.node.y=this.node.parent.convertToNodeSpaceAR(cc.v2(0,u)).y;var p=Math.abs(a.yMin-o.yMax);i.upBlock=p}if(s.yMin>=a.yMax&&o.yMin<=a.yMax){var d=o.center.y+Math.abs(a.yMax-o.yMin);this.node.y=this.node.parent.convertToNodeSpaceAR(cc.v2(0,d)).y;var f=Math.abs(a.yMin-o.yMax);i.downBlock=f,this._jumping=!1}void 0==t.blockArrays&&(t.blockArrays=[]);var m=[];void 0!=i.upBlock&&void 0!=i.downBlock?i.upBlock<i.downBlock?(m.push("_upBlock"),this._upBlock++):(m.push("_downBlock"),this._downBlock++):void 0!=i.upBlock?(m.push("_upBlock"),this._upBlock++):void 0!=i.downBlock&&(m.push("_downBlock"),this._downBlock++),void 0!=i.leftBlock&&void 0!=i.rightBlock?i.leftBlock<i.rightBlock?(m.push("_leftBlock"),this._leftBlock++):(m.push("_rightBlock"),this._rightBlock++):void 0!=i.leftBlock?(m.push("_leftBlock"),this._leftBlock++):void 0!=i.rightBlock&&(m.push("_rightBlock"),this._rightBlock++),t.blockArrays[this.node.name]=m}},onCollisionExit:function(t,e){if("btn"!=t.node.group&&"toggle"!=t.node.group&&"gate"!=t.node.group&&"danger"!=t.node.group&&t.blockArrays&&void 0!=t.blockArrays[this.node.name]){var n=t.blockArrays[this.node.name],i=!0,o=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value;this[r]--}}catch(h){o=!0,a=h}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw a}}}},changeAnim:function(){"squating"==this._fsm.current?this._animState&&"squat"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("squat")):this._jumping?this._animState&&"jump"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("jump")):"moving"==this._fsm.current?this._animState&&"move"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("move")):"idling"==this._fsm.current&&(this._animState&&"idle"===this._animState.name||(this._anim.stop(),this._animState=this._anim.play("idle")))},update:function(t){this._left&&!this._leftBlock&&(this.node.x-=this.speedX),this._right&&!this._rightBlock&&(this.node.x+=this.speedX),this._downBlock?(this._speedY=0,this._jumping=!1,this._fsm.can("move")&&this._fsm.move()):this._speedY+=this.g*t,this._up&&(this._speedY=this.jumpY,this._up=!1,this._jumping=!0);var e=this._speedY;this._upBlock&&(e=Math.min(this._speedY,0)),this.node.y+=e*t}}),cc._RFpop()},{"shadow-player-fsm":"shadow-player-fsm"}],"shadow-player-fsm":[function(t,e,n){"use strict";cc._RFpush(e,"eba016kCEJMC7e4+uQHmPVV","shadow-player-fsm");var i=t("state-machine"),o={initial:"nope",events:[{name:"startup",from:"nope",to:"configing"},{name:"idle",from:"configing",to:"idling"},{name:"move",from:"configing",to:"moving"},{name:"squat",from:"configing",to:"squating"},{name:"jump",from:"moving",to:"jumping"},{name:"move",from:"jumping",to:"moving"}]},a=function(){var t=i.create(o);return t.ASYNC=i.ASYNC,t};e.exports={create:a},cc._RFpop()},{"state-machine":"state-machine"}],"shadow-player-generator":[function(t,e,n){"use strict";cc._RFpush(e,"e1b54ZTd5FP64Ylonk756aR","shadow-player-generator"),cc.Class({"extends":cc.Component,properties:{_isSpaceRelease:!0,_moveControl:null,shadowPlayerPrefab:cc.Prefab},onLoad:function(){this._moveControl=this.node.getComponent("move-control"),cc.systemEvent.on("keydown",this.onKeyDown,this),cc.systemEvent.on("keyup",this.onKeyUp,this)},onKeyDown:function(t){t.keyCode==cc.KEY.s&&this._isSpaceRelease&&(this._isSpaceRelease=!1,this.generate())},onKeyUp:function(t){t.keyCode==cc.KEY.s&&(this._isSpaceRelease=!0)},generate:function(){this._moveControl._leftBlock||this._moveControl._rightBlock||(this._moveControl._down?this.generateSquat():this._moveControl._jumping?this.generateMove(!0):1==!!this._moveControl._left&&0==!!this._moveControl._right||0==!!this._moveControl._left&&1==!!this._moveControl._right?this.generateMove(!1):(1==!!this._moveControl._left&&1==!!this._moveControl._right||0==!!this._moveControl._left&&0==!!this._moveControl._right)&&this.generateIdle())},setShadowPlayerToScene:function(t){t.parent=this.node.parent,t.position=cc.pAdd(this.node.position,cc.v2(0,10))},generateSquat:function(){var t=cc.instantiate(this.shadowPlayerPrefab);t.getComponent("shadow-player-control").init("squat",this.node),this.setShadowPlayerToScene(t)},generateMove:function(t){var e=cc.instantiate(this.shadowPlayerPrefab);e.getComponent("shadow-player-control").init("move",this.node,t),this.setShadowPlayerToScene(e)},generateIdle:function(){var t=cc.instantiate(this.shadowPlayerPrefab);t.getComponent("shadow-player-control").init("idle",this.node),this.setShadowPlayerToScene(t)}}),cc._RFpop()},{}],"simple-action-control":[function(t,e,n){"use strict";cc._RFpush(e,"aba4bI7z8FB3rTkTjubt62A","simple-action-control"),cc.Class({"extends":cc.Component,properties:{_simpleActionHelperArray:null,loop:!1,easingRate:3,_easingHelper:null},onLoad:function(){this._easingHelper=t("easing-helper"),this._simpleActionHelperArray=this.getComponents("simple-action-helper"),this.anim()},anim:function(){var t=this._simpleActionHelperArray.shift();if(t){var e=t.moveTo,n=t.rotateTo,i=t.scaleTo,o=t.deltaTime,a=t.easing,s=null,c=null,r=null;a==this._easingHelper.nope?(s=cc.moveTo(o,e),c=cc.rotateTo(o,n),r=cc.scaleTo(o,i.x,i.y)):(s=cc.moveTo(o,e).easing(cc[this._easingHelper[a]](this.easingRate)),c=cc.rotateTo(o,n).easing(cc[this._easingHelper[a]](this.easingRate)),r=cc.scaleTo(o,i.x,i.y).easing(cc[this._easingHelper[a]](this.easingRate))),this.node.runAction(cc.sequence(cc.spawn(s,c,r),cc.callFunc(this.anim.bind(this)))),this.loop&&this._simpleActionHelperArray.push(t)}}}),cc._RFpop()},{"easing-helper":"easing-helper"}],"simple-action-helper":[function(t,e,n){"use strict";cc._RFpush(e,"c9eeesZCDVMb4EdmhzW8LQZ","simple-action-helper"),cc.Class({"extends":cc.Component,editor:{executeInEditMode:!0},properties:{easing:{"default":t("easing-helper").nope,type:t("easing-helper")},deltaTime:0,updateAll:{get:function(){return!1},set:function(t){t&&(this.moveTo=this.node.position,this.scaleTo=cc.v2(this.node.scaleX,this.node.scaleY),this.rotateTo=this.node.rotation)}},moveTo:cc.v2(),updatePosition:{get:function(){return!1},set:function(t){t&&(this.moveTo=this.node.position)}},scaleTo:cc.v2(),updateScale:{get:function(){return!1},set:function(t){t&&(this.scaleTo=cc.v2(this.node.scaleX,this.node.scaleY))}},rotateTo:0,updateRotate:{get:function(){return!1},set:function(t){t&&(this.rotateTo=this.node.rotation)}}}}),cc._RFpop()},{"easing-helper":"easing-helper"}],"simple-action-item":[function(t,e,n){"use strict";cc._RFpush(e,"a4950mS5otJHJP/TKj3oPLV","simple-action-item");var i=cc.Class({properties:{moveTo:cc.v2(),scaleTo:cc.v2(),rotateTo:0,deltaTime:0}});e.exports=i,cc._RFpop()},{}],"state-machine":[function(t,e,n){"use strict";cc._RFpush(e,"66536SOZIdOQb3J8JE4gU2f","state-machine"),function(){var t={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,n){var i="string"==typeof e.initial?{state:e.initial}:e.initial,o=e.terminal||e["final"],a=n||e.target||{},s=e.events||[],c=e.callbacks||{},r={},h={},l=function(e){var n=Array.isArray(e.from)?e.from:e.from?[e.from]:[t.WILDCARD];r[e.name]=r[e.name]||{};for(var i=0;i<n.length;i++)h[n[i]]=h[n[i]]||[],h[n[i]].push(e.name),r[e.name][n[i]]=e.to||n[i];e.to&&(h[e.to]=h[e.to]||[])};i&&(i.event=i.event||"startup",l({name:i.event,from:"none",to:i.state}));for(var u=0;u<s.length;u++)l(s[u]);for(var p in r)r.hasOwnProperty(p)&&(a[p]=t.buildEvent(p,r[p]));for(var p in c)c.hasOwnProperty(p)&&(a[p]=c[p]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(e){return!this.transition&&void 0!==r[e]&&(r[e].hasOwnProperty(this.current)||r[e].hasOwnProperty(t.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(h[this.current]||[]).concat(h[t.WILDCARD]||[])},a.isFinished=function(){return this.is(o)},a.error=e.error||function(t,e,n,i,o,a,s){throw s||a},a.states=function(){return Object.keys(h).sort()},i&&!i.defer&&a[i.event](),a},doCallback:function(e,n,i,o,a,s){if(n)try{return n.apply(e,[i,o,a].concat(s))}catch(c){return e.error(i,o,a,s,t.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",c)}},beforeAnyEvent:function(e,n,i,o,a){return t.doCallback(e,e.onbeforeevent,n,i,o,a)},afterAnyEvent:function(e,n,i,o,a){return t.doCallback(e,e.onafterevent||e.onevent,n,i,o,a)},leaveAnyState:function(e,n,i,o,a){return t.doCallback(e,e.onleavestate,n,i,o,a)},enterAnyState:function(e,n,i,o,a){return t.doCallback(e,e.onenterstate||e.onstate,n,i,o,a)},changeState:function(e,n,i,o,a){return t.doCallback(e,e.onchangestate,n,i,o,a)},beforeThisEvent:function(e,n,i,o,a){return t.doCallback(e,e["onbefore"+n],n,i,o,a)},afterThisEvent:function(e,n,i,o,a){return t.doCallback(e,e["onafter"+n]||e["on"+n],n,i,o,a)},leaveThisState:function(e,n,i,o,a){return t.doCallback(e,e["onleave"+i],n,i,o,a)},enterThisState:function(e,n,i,o,a){return t.doCallback(e,e["onenter"+o]||e["on"+o],n,i,o,a)},beforeEvent:function(e,n,i,o,a){if(!1===t.beforeThisEvent(e,n,i,o,a)||!1===t.beforeAnyEvent(e,n,i,o,a))return!1},afterEvent:function(e,n,i,o,a){t.afterThisEvent(e,n,i,o,a),t.afterAnyEvent(e,n,i,o,a)},leaveState:function(e,n,i,o,a){var s=t.leaveThisState(e,n,i,o,a),c=t.leaveAnyState(e,n,i,o,a);return!1!==s&&!1!==c&&(t.ASYNC===s||t.ASYNC===c?t.ASYNC:void 0)},enterState:function(e,n,i,o,a){t.enterThisState(e,n,i,o,a),t.enterAnyState(e,n,i,o,a)},buildEvent:function(e,n){return function(){var i=this.current,o=n[i]||(n[t.WILDCARD]!=t.WILDCARD?n[t.WILDCARD]:i)||i,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,i,o,a,t.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,i,o,a,t.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===t.beforeEvent(this,e,i,o,a))return t.Result.CANCELLED;if(i===o)return t.afterEvent(this,e,i,o,a),t.Result.NOTRANSITION;var s=this;this.transition=function(){return s.transition=null,s.current=o,t.enterState(s,e,i,o,a),t.changeState(s,e,i,o,a),t.afterEvent(s,e,i,o,a),t.Result.SUCCEEDED},this.transition.cancel=function(){s.transition=null,t.afterEvent(s,e,i,o,a)};var c=t.leaveState(this,e,i,o,a);return!1===c?(this.transition=null,t.Result.CANCELLED):t.ASYNC===c?t.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=t),n.StateMachine=t):"function"==typeof define&&define.amd?define(function(e){return t}):"undefined"!=typeof window?window.StateMachine=t:"undefined"!=typeof self&&(self.StateMachine=t)}(),cc._RFpop()},{}],"toggle-control":[function(t,e,n){"use strict";cc._RFpush(e,"e8283WtRWpLA4pnJVw1E2IA","toggle-control"),cc.Class({"extends":cc.Component,properties:{toggleArray:[cc.Node]},onLoad:function(){var t=cc.director.getCollisionManager();t.enabled=!0,this.node.name="toggle#"+Date.now()},onCollisionEnter:function(t,e){if("shadow-player"==t.node.group||"player"==t.node.group){var n=!0,i=!1,o=void 0;try{for(var a,s=this.toggleArray[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;c.active=!c.active}}catch(r){i=!0,o=r}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}this.node.scaleX=-this.node.scaleX}}}),cc._RFpop()},{}],"wall-script":[function(t,e,n){"use strict";cc._RFpush(e,"676e6oo4odBmZuI7Tu9kn8d","wall-script"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.node.name="wall#"+Date.now()}}),cc._RFpop()},{}]},{},["easing-helper","simple-action-control","simple-action-helper","simple-action-item","shadow-player-fsm","state-machine","btn-control","danger-control","gate-control","girl-final-tips-script","girl-tips-script","level-mgr","move-control","restart-script","shadow-player-control","shadow-player-generator","toggle-control","wall-script"]);